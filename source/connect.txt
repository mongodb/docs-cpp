.. _cpp-connect:

==================
Connect to MongoDB
==================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. facet::
   :name: genre
   :values: reference
 
.. meta::
   :description: Learn how to use the {+driver-short+} to connect to MongoDB.
   :keywords: client, ssl

.. toctree::
   :titlesonly:
   :maxdepth: 1

   /connect/instance 
   /connect/client
   /connect/connection-targets
   /connect/connection-options
   /connect/network-compression
   /connect/stable-api.txt

Overview
--------

This page contains code examples that show how to connect your C++ application
to MongoDB with various settings.

.. tip::

  To learn more about the connection options on this page, see the link
  provided in each section.

To use a connection example from this page, copy the code example into the
:ref:`sample application <cpp-connect-sample>` or your own application.
Be sure to replace all placeholders in the code examples, such as ``<hostname>``, with
the relevant values for your MongoDB deployment.

.. _cpp-connect-sample:

.. include:: /includes/usage-examples/sample-app-intro.rst

.. literalinclude:: /includes/usage-examples/connect-sample-app.cpp
   :language: cpp
   :copyable: true
   :linenos:
   :emphasize-lines: 4-6

Connection
----------

Local Deployment
~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-local
    :end-before: end-local

Atlas
~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-atlas
    :end-before: end-atlas

Replica Set
~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-replica-set
    :end-before: end-replica-set

Transport Layer Security (TLS)
------------------------------

Enable TLS
~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-enable-tls
    :end-before: end-enable-tls

To learn more about enabling TLS, see :ref:`cpp-enable-tls` in
the TLS configuration guide.

Specify a Certificate Authority (CA) File
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/connect/ca-file-tabs.rst

To learn more about specifying a CA file, see :ref:`cpp-specify-ca-file` in
the TLS configuration guide.

Disable OCSP Checks
~~~~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-disable-ocsp
    :end-before: end-disable-oscp

To learn more about disabling OCSP checks, see :ref:`cpp-disable-ocsp` in
the TLS configuration guide.

Specify a Certificate Revocation List (CRL)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/connect/crl-tabs.rst

To learn more about specifying a CRL, see :ref:`cpp-crl` in
the TLS configuration guide.

Present a Client Certificate
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/connect/client-cert-tabs.rst

To learn more about specifying a client certificate, see :ref:`cpp-client-cert` in
the TLS configuration guide.

Provide a Certificate Key File Password
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/connect/key-file-password.rst

To learn more about providing a key file password, see :ref:`cpp-key-file-password` in
the TLS configuration guide.

Allow Insecure TLS
~~~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-insecure-tls
    :end-before: end-insecure-tls

To learn more about allowing insecure TLS, see :ref:`cpp-insecure-tls` in
the TLS configuration guide.

Disable Certificate Validation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/connect/disable-cert-validation-tabs.rst

To learn more about disabling certificate validation, see :ref:`cpp-insecure-tls` in
the TLS configuration guide.

Disable Hostname Verification
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-disable-hostname
    :end-before: end-disable-hostname

To learn more about disabling hostname verification, see :ref:`cpp-insecure-tls` in
the TLS configuration guide.

Network Compression
-------------------

Compression Algorithms
~~~~~~~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-compression-all
    :end-before: end-compression-all

To learn more about specifying compression algorithms, see
:ref:`cpp-enable-compression` in the Network Compression guide.

zlib Compression Level
~~~~~~~~~~~~~~~~~~~~~~

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-compression-zlib
    :end-before: end-compression-zlib

To learn more about setting the zlib compression level, see
:ref:`cpp-enable-compression` in the Network Compression guide.

{+stable-api+}
--------------

.. literalinclude:: /includes/usage-examples/connect-usage-examples.cpp
    :language: cpp
    :dedent:
    :start-after: start-stable-api
    :end-before: end-stable-api

To learn more about the {+stable-api+}, see :ref:`cpp-stable-api`.

.. TODO:
 Server Selection
 ----------------
 Limit Server Execution Time
 ---------------------------

